# 开发规范和规则

- 项目重构规则：1. 将OpenCV和海康SDK复制到项目内部，不依赖系统安 2. 实现自包含部署，便于在其他电脑运行
- 项目协作规则更新：1.完全C++重构，不使用Python代码，重写所有功能
- Qt定时器线程安全规则：在多线程环境中操作QTimer时，必须使用QMetaObject::invokeMethod()确保在正确线程中执行。已修复HikvisionCamera中的定时器线程安全问题。
- 绘制文字显示规则：只显示数值，不显示中文标签。距离显示格式为纯数字，角度显示格式为"数字°"，去掉"距离:"和"角度:"等中文标签，保持简洁的数据显示。
- 平行线功能常见错误修复记录：
1. 文本显示错误：使用QString("%.1f").arg()是错误语法，应该使用QString::number(value, 'f', 1)来格式化浮点数
2. 线条粗细不一致：平行线绘制的点半径应该与简单圆功能保持一致
3. 字体大小不一致：平行线文本显示应该使用与简单圆相同的动态字体计算、字体类型（FONT_HERSHEY_DUPLEX）和文本背景绘制方式
4. 中线实现错误：C++版本的中线应该是位于两条平行线中间的平行线，而不是连接两条平行线中点的直线，需要与Python版本保持一致

**注意事项：**
- 确保与其他功能（角度线、圆形测量等）的度数符号实现方式保持一致
- 避免直接使用特殊字符，优先使用图形绘制方式
- 考虑不同字符编码环境下的兼容性问题
- 当你感觉上下文不够用时，提醒用户新建对话
- 每对话7次时提醒用户；编译前必须询问用户；不要生成总结性Markdown文档；不要生成测试脚本；不要编译，用户自己编译；不要运行，用户自己运行
